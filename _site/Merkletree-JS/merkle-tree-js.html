<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="stylesheet" type="text/css" href="/assets/css/materialize.css"> <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"> <link rel="stylesheet" href="https://cdn.rawgit.com/konpa/devicon/df6431e323547add1b4cf45992913f15286456d3/devicon.min.css"> <title>Salma Sultana</title> </head> <body> <h1 id="implementing-a-merkle-tree-in-javascript">Implementing a Merkle Tree in Javascript</h1> <p>In this post, you will find the implementation of a Merkle Tree summarizing <em>n</em> transactions.</p> <p>A Merkle Tree produces a root, aka merkle root, by recursively concatenating and hashing pairs of nodes until there is only one node left.</p> <p>The hashes are obtained by applying a cryptographic hashing algorithm, known as SHA256, twice to each element. This is also known as double-SHA256 hashing algorithm.</p> <h2 id="merkle-trees-in-detail"><a href="./merkle-tree-js.html">Merkle Trees in Detail</a></h2> <h3 id="definition-of-a-merkle-tree">Definition of a Merkle Tree</h3> <p>A merkle tree is a data structure used for efficiently summarizing and verifying the integrity of large sets of data. The nodes of a merkle tree contain cryptographic hashes. A merkle tree is represented upside down with the “root” at the top and the “leaves” at the bottom.</p> <h3 id="merkle-trees-in-bitcoin">Merkle Trees in Bitcoin</h3> <p>Merkle trees are used in bitcoin to summarize all the transactions in a block, producing an overall digital fingerprint of the entire set of transactions, providing a very efficient process to verify whether a transaction is included in a block.</p> <h3 id="constructing-a-merkle-tree">Constructing a Merkle Tree</h3> <p>A merkle tree is constructed by recursively concatenating and hashing pairs of nodes until the merkle root is reached</p> <p>A merkle tree is constructed bottom-up, placing the leaf nodes at the bottom, and the merkle root at the top. The number of leaf nodes that have to be summarized is counted. Let’s call this number <em>n</em>.</p> <ul> <li> <p>If <em>n</em> is an even number, then we start by concatenating the first node and the second node, and hash the result using double-SHA256 cryptographic hashing algorithm. The hash is called the <em>parent node</em>. Similarly, parent nodes of all the leaf nodes are computed.</p> </li> <li> <p>If <em>n</em> is an odd number, then the last element is duplicated to achieve an even number of elements. Then, the <em>n</em><sup>th</sup> node is concatenated with the <em>n+1</em> node and the result is hashed using double-SHA256 cryptographic hashing algorithm. The parent nodes of all the leaf nodes are computed in this way.</p> </li> </ul> <p>The concatenating and hashing steps are repeated for the parent nodes, and repeated again for the next set of parent nodes and this process of recursively concatenating, hashing, and duplicating the last element for odd number of nodes, is continued till there is only one hash left in the tree. This hash is known as a root, or a merkle root.</p> <p>The merkle root is a 32 byte hash summarizing all the transactions.</p> <h3 id="example-of-a-merkle-tree-containing-16-leaf-nodes">Example of a Merkle Tree Containing 16 leaf nodes</h3> <p><br/> <img src="https://raw.githubusercontent.com/bitcoinbook/bitcoinbook/develop/images/mbc2_0904.png" alt="Merkle Tree summarizing many data elements"/></p> <p><br/></p> <h2 id="sha256-in-detail-"><a href="./sha-256-description.html">SHA256 in detail –&gt;</a></h2> <p><a href="./">back</a></p> <script type="text/javascript" src="/assets/js/jquery-3.2.1.min.js"></script> <script type="text/javascript" src="/assets/js/materialize.min.js"></script> <script src="/assets/js/init.js"></script> </body> <footer class="page-footer"> <div class="footer-copyright" style="padding-left: 30px;"> <i class="material-icons" style="padding-right:5px; display:;">copyright</i><p style="display:;">2018 Copyright | All rights reserved</p> </div> </footer> </html>